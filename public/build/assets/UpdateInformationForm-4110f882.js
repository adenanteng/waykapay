import{T as M,i as F,d as u,s as U,o as k,e as w,b as s,w as n,F as D,Q as P,a,t as b,g as v,u as c,n as R,f as T}from"./app-f95d9850.js";import{_ as z}from"./ActionMessage-f8060db4.js";import{_ as A}from"./FormSection-ab42ec61.js";import{_ as $}from"./InputError-8a28389b.js";import{_ as S}from"./InputLabel-553db71a.js";import{_ as E}from"./PrimaryButton-1abf74b8.js";import{_ as K}from"./TextInput-d0ab6be6.js";import{_ as q}from"./ActionSection-0d3758b1.js";import{_ as Q}from"./TextAreaInput-3dec5f7b.js";import{e as N}from"./vue3-otp-input.esm-1b7a0ebe.js";import{b as G}from"./bcrypt-e6c811e5.js";import{a as H}from"./DialogModal-bf4e73b3.js";import"./SectionTitle-ac939a20.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./_commonjs-dynamic-modules-302442b1.js";const J={class:"flex items-center px-2"},L={class:"flex-shrink-0"},W=["src","alt"],X={class:"ml-3 min-w-0 flex-1"},Y={class:"text-base font-medium text-gray-800 truncate capitalize"},Z={class:"text-sm font-medium text-gray-500 truncate"},ee={class:"col-span-6 sm:col-span-3"},ae={class:"flex"},se=a("span",{class:"flex items-center bg-white text-black border border-gray-300 border-r-0 rounded-3xl rounded-r-none shadow-sm mt-1 px-3"}," Rp ",-1),te={class:"mt-1 text-xs text-gray-600"},oe={class:"col-span-6 sm:col-span-4"},ne=a("div",{class:"w-full text-center"}," Masukkan PIN transaksi kamu ",-1),le={class:"grid justify-center"},re={key:0,class:"w-full text-center text-sm text-red-600 mt-2"},we={__name:"UpdateInformationForm",props:{users:Object|String,beneficiary:Object|String,token:String,response:Object|String,bank:Object,account_no:String},setup(I){const l=I,t=M({amount:null,bank:l.bank,account_no:l.account_no,desc:null,beneficiary:l.beneficiary??null,token:l.token??null}),{..._}=F(()=>P().props.user).value,g=u(null),h=()=>{Number(i.value)>=Number(_.wallet_balance)?(p.value=!1,g.value="Saldo kurang"):l.beneficiary?(t.amount=i.value,t.post(route("money-transfer.confirmAyo"),{errorBag:"storeInformation",preserveScroll:!0,replace:!0,onSuccess:()=>{var e;(e=d.value)==null||e.clearInput()}})):(t.amount=i.value.replaceAll(".",""),t.post(route("money-transfer.confirm"),{errorBag:"storeInformation",preserveScroll:!0,replace:!0,onSuccess:()=>{var e;(e=d.value)==null||e.clearInput()}}))};function C(e){return(e/1).toFixed(0).replace(".","").toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}const i=u(null);U(i,e=>{i.value=e.toString().replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,".")});const p=u(!1),d=u(N|null),y=u(""),x=u(!1),V=()=>{_.pin?p.value=!0:h()},B=()=>{p.value=!1},O=e=>{let o=e;o=o.replace(/^\$2y(.+)$/i,"$2a$1"),G.compare(o,_.pin,function(r,f){var m;f?h():(x.value=!0,(m=d.value)==null||m.clearInput())})},j=e=>{};return(e,o)=>(k(),w(D,null,[s(q,null,{title:n(()=>[]),description:n(()=>[]),content:n(()=>{var r,f,m;return[a("div",J,[a("div",L,[a("img",{class:"h-5 w-full",src:l.bank.logo,alt:l.bank.name},null,8,W)]),a("div",X,[a("div",Y,b(((r=l.users)==null?void 0:r.name)??((m=(f=l.beneficiary)==null?void 0:f.beneficiaryDetails)==null?void 0:m.beneficiaryName)),1),a("div",Z,b(l.account_no),1)])])]}),_:1}),s(A,null,{title:n(()=>[v(" Mau Transfer berapa? ")]),description:n(()=>[]),form:n(()=>[a("div",ee,[s(S,{for:"amount",value:"Nominal"}),a("div",ae,[se,s(K,{id:"amount",modelValue:i.value,"onUpdate:modelValue":o[0]||(o[0]=r=>i.value=r),type:"tel",class:"mt-1 block w-full rounded-l-none",min:"1",max:Number(e.$page.props.user.wallet_balance)<=2e6?e.$page.props.user.wallet_balance:2e6,required:"",autofocus:""},null,8,["modelValue","max"])]),s($,{message:c(t).errors.amount||g.value,class:"mt-2"},null,8,["message"]),a("p",te," Nominal Rp 1.000 - Rp "+b(Number(e.$page.props.user.wallet_balance)<=2e6?C(e.$page.props.user.wallet_balance):"2.000.000"),1)]),a("div",oe,[s(S,{for:"amount",value:"Keterangan"}),s(Q,{id:"desc",modelValue:c(t).desc,"onUpdate:modelValue":o[1]||(o[1]=r=>c(t).desc=r),type:"text",class:"mt-1 block w-full",rows:"1"},null,8,["modelValue"]),s($,{message:c(t).errors.desc,class:"mt-2"},null,8,["message"])])]),actions:n(()=>[s(z,{on:c(t).recentlySuccessful,class:"mr-3"},{default:n(()=>[v(" Berhasil disimpan. ")]),_:1},8,["on"]),s(E,{class:R(["w-full justify-center",{"opacity-25":c(t).processing}]),disabled:c(t).processing,onClick:V},{default:n(()=>[v(" Konfirmasi ")]),_:1},8,["class","disabled"])]),_:1}),s(H,{show:p.value,onClose:B},{title:n(()=>[ne]),content:n(()=>[a("div",le,[s(c(N),{ref_key:"otpInput",ref:d,value:y.value,"onUpdate:value":o[2]||(o[2]=r=>y.value=r),"input-classes":"otp-input",separator:"","num-inputs":6,"should-auto-focus":!0,"input-type":"letter-numeric",conditionalClass:["one","two","three","four","five","six"],onOnChange:j,onOnComplete:O},null,8,["value"]),x.value?(k(),w("p",re,"Pin salah, silahkan coba lagi.")):T("",!0)])]),_:1},8,["show"])],64))}};export{we as default};
