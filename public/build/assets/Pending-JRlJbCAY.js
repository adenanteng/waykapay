import{T as N,d as p,k as U,p as D,o as e,e as a,a as s,b as n,F as h,t as i,g as u,w as m,u as c,f as r,c as E,i as F,n as Q,Q as L,E as k,G as q}from"./app-BqwrhTGw.js";import{e as w}from"./popper.esm-BMjspBSD.js";import{A as z}from"./ApplicationLogoTitle-DHa6aQtW.js";import{e as B}from"./vue3-otp-input.esm-CTvo33T4.js";import{b as G}from"./bcrypt-CbS5xlmc.js";import"./moment-DuqTC47s.js";import{_ as H}from"./SecondaryButton-RaSsS-0B.js";import{_ as J}from"./InputLabel-WLP7ED0u.js";import{_ as W}from"./TextInput-Dtp3Gtll.js";import{_ as X}from"./InputError-Bukhv9a_.js";import{_ as Y}from"./ActionMessage-CsGThyMu.js";import{_ as I}from"./PrimaryButton-UwDG_8DL.js";import{a as Z}from"./DialogModal-WatmNwfc.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./_commonjs-dynamic-modules-TDtrdbi3.js";const ss={class:"rounded-3xl bg-white bg-opacity-20 backdrop-blur-sm overflow-hidden shadow-lg border border-gray-300"},ts={class:"px-4 py-5 sm:px-6 flex flex-col justify-center items-center sm:items-start"},es=s("h3",{class:"mt-1 text-lg font-bold leading-6 text-gray-900"},"Transaksi Pending",-1),os={class:"border-t border-gray-600 border-dashed px-4 py-5 sm:px-6"},as={class:"grid grid-cols-1 gap-x-4 gap-y-2 sm:gap-y-8 sm:grid-cols-2 text-gray-900"},is={class:"sm:col-span-1 flex sm:block justify-between"},ns=s("div",{class:"text-sm"},"Bank",-1),ls={class:"text-sm font-semibold uppercase"},cs={class:"sm:col-span-1 flex sm:block justify-between"},rs=s("div",{class:"text-sm"},"No. Virtual Account",-1),ds={class:"text-sm font-semibold"},ms=s("i",{class:"fa-duotone fa-paste ml-2"},null,-1),_s=[ms],us={class:"sm:col-span-1 flex sm:block justify-between"},ps=s("div",{class:"text-sm"},"Metode Pembayaran",-1),hs={class:"text-sm font-semibold uppercase"},fs={class:"sm:col-span-2 flex flex-col items-center my-5 gap-3"},ys=s("div",{class:"text-sm"},[s("img",{src:"/img/vendor/QRIS.svg",class:"h-8 w-auto",alt:"QRIS"})],-1),vs={class:"text-sm"},bs={class:"sm:col-span-1 flex sm:block justify-between"},xs=s("div",{class:"text-sm"},"Metode Pembayaran",-1),gs={class:"text-sm font-semibold uppercase"},ks={class:"sm:col-span-1 flex sm:block justify-between"},ws=s("div",{class:"text-sm"},"No. Pembayaran",-1),js={class:"text-sm font-semibold"},Ss=s("i",{class:"fa-duotone fa-paste ml-2"},null,-1),Cs=[Ss],$s={class:"sm:col-span-1 flex sm:block justify-between"},Ns=s("div",{class:"text-sm"},"Metode Pembayaran",-1),Bs={class:"text-sm font-semibold uppercase"},Is=s("div",{class:"sm:col-span-1 flex sm:block justify-between"},[s("div",{class:"text-sm"},"Atas Nama"),s("div",{class:"text-sm font-semibold uppercase"},"Agus Suryaman")],-1),Vs={class:"sm:col-span-1 flex sm:block justify-between"},Ps=s("div",{class:"text-sm"},"No. Rekening",-1),As={class:"text-sm font-semibold"},Ms=s("i",{class:"fa-duotone fa-paste ml-2"},null,-1),Rs=[Ms],Os={key:0,class:"sm:col-span-1 flex sm:block justify-between"},Ts=s("div",{class:"text-sm"},"Produk",-1),Ks={class:"text-sm font-semibold uppercase"},Us={key:1,class:"sm:col-span-1 flex sm:block justify-between"},Ds=s("div",{class:"text-sm"},"No. Kustomer",-1),Es={class:"text-sm font-semibold"},Fs={class:"sm:col-span-2 flex sm:block justify-between gap-5"},Qs=s("div",{class:"text-sm"},"Keterangan",-1),Ls={class:"text-sm font-semibold text-right sm:text-left"},qs=s("span",{class:"my-2 border-t border-gray-600 border-dashed block sm:hidden"},null,-1),zs={class:"sm:col-span-1 flex sm:block justify-between"},Gs=s("div",{class:"text-sm"},"Nominal",-1),Hs={class:"text-sm font-semibold"},Js={key:5,class:"sm:col-span-1 flex sm:block justify-between"},Ws=s("div",{class:"text-sm"},"Kode Unik",-1),Xs={class:"text-sm font-semibold"},Ys={class:"sm:col-span-1 flex sm:block justify-between"},Zs=s("div",{class:"text-sm"},"Biaya Admin",-1),st={class:"text-sm font-semibold"},tt={key:6,class:"sm:col-span-1 flex sm:block justify-between"},et=s("div",{class:"text-sm"},"Biaya Layanan",-1),ot={class:"text-sm font-semibold"},at={class:"sm:col-span-1 flex sm:block justify-between"},it=s("div",{class:"text-sm font-bold"},"Total",-1),nt={class:"text-lg font-bold"},lt={key:7,class:""},ct=s("span",{class:"my-2 border-t border-gray-600 border-dashed block sm:hidden"},null,-1),rt=s("p",{class:"text-xs text-gray-500"},"Untuk memudahkan transaksi harap transfer nominal beserta kode uniknya ya.",-1),dt=[ct,rt],mt={key:0,class:"mt-5 grid gap-5"},_t={key:1,class:"mt-5 grid gap-5"},ut={key:1,class:"rounded-3xl bg-white bg-opacity-20 backdrop-blur-sm overflow-hidden shadow-lg border border-gray-300"},pt=s("div",{class:"px-4 py-5 sm:px-6 flex flex-col justify-center items-center sm:items-start"},[s("h3",{class:"mt-1 text-lg font-bold leading-6 text-gray-900"},"Validasi")],-1),ht={class:"border-t border-gray-600 border-dashed px-4 py-5 sm:px-6"},ft={class:"grid grid-cols-6"},yt={class:"col-span-6 sm:col-span-3"},vt={class:"relative"},bt=s("div",{class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3 text-gray-600"}," Rp ",-1),xt={class:"col-span-6 mt-3 flex justify-between items-center"},gt=s("div",{class:"w-full text-center"}," Masukkan PIN transaksi kamu ",-1),kt={class:"grid justify-center"},wt={key:0,class:"w-full text-center text-sm text-red-600 mt-2"},Ut={__name:"Pending",props:{history:Object},setup(V){const t=V,_=N({valid:null,valid_amount:null}),j=()=>{_.valid=t.history.order_id,_.valid_amount=f.value.replaceAll(".",""),_.patch(route("transaction.update",t.history),{errorBag:"storeInformation",preserveScroll:!0,onSuccess:()=>{_.reset(),v.value=!1}})},P=N({transaction:history}),A=()=>{P.post(route("money-transfer.ayoStatus"),{errorBag:"updateInformation",preserveScroll:!0,onSuccess:()=>{}})},M=()=>{$.pin?v.value=!0:j()},R=()=>{var l;v.value=!1,(l=x.value)==null||l.clearInput()},v=p(!1),x=p(B|null),S=p(""),C=p(!1),{...$}=U(()=>L().props.user).value,O=p(null),T=l=>{let o=l;o=o.replace(/^\$2y(.+)$/i,"$2a$1"),G.compare(o,$.pin,function(g,b){var d;b?j():(C.value=!0,(d=x.value)==null||d.clearInput())})},K=l=>{},f=p(t.history.gross_amount.toString().replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,"."));D(f,l=>{f.value=l.toString().replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,".")});function y(l){return(l/1).toFixed(0).replace(".","").toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}return(l,o)=>{var g,b;return e(),a(h,null,[s("div",ss,[s("div",ts,[n(z,{class:"block sm:hidden"}),es]),s("div",os,[s("div",as,[t.history.virtual_account?(e(),a(h,{key:0},[s("div",is,[ns,s("div",ls,i(t.history.virtual_account.bank),1)]),s("div",cs,[rs,s("div",ds,[u(i(t.history.virtual_account.va_number)+" ",1),n(c(w),{class:"text-sm text-primary-700 font-normal lowercase",content:"Sukses Copy",arrow:"",placement:"right-end"},{default:m(()=>[s("button",{class:"",onClick:o[0]||(o[0]=d=>c(k)(t.history.virtual_account.va_number))},_s)]),_:1})])])],64)):t.history.wallet_account?(e(),a(h,{key:1},[s("div",us,[ps,s("div",hs,i(t.history.wallet_account.bank),1)]),s("div",fs,[ys,s("div",vs,[n(c(q),{value:t.history.wallet_account.qr_code,tag:"svg",options:{width:200,color:{dark:"#000",light:"#fff"}}},null,8,["value"])])])],64)):t.history.offline_account?(e(),a(h,{key:2},[s("div",bs,[xs,s("div",gs,i(t.history.offline_account.bank),1)]),s("div",ks,[ws,s("div",js,[u(i(t.history.offline_account.payment_code)+" ",1),n(c(w),{class:"text-sm text-primary-700 font-normal lowercase",content:"Sukses Copy",arrow:"",placement:"right-end"},{default:m(()=>[s("button",{class:"",onClick:o[1]||(o[1]=d=>c(k)(t.history.offline_account.payment_code))},Cs)]),_:1})])])],64)):t.history.manual_account?(e(),a(h,{key:3},[s("div",$s,[Ns,s("div",Bs,i(t.history.manual_account.bank),1)]),Is,s("div",Vs,[Ps,s("div",As,[u(i(t.history.manual_account.payment_code)+" ",1),n(c(w),{class:"text-sm text-primary-700 font-normal lowercase",content:"Sukses Copy",arrow:"",placement:"right-end"},{default:m(()=>[s("button",{class:"",onClick:o[2]||(o[2]=d=>c(k)(t.history.manual_account.payment_code))},Rs)]),_:1})])])],64)):(e(),a(h,{key:4},[t.history.category_id!=99&&t.history.category_id!=1?(e(),a("div",Os,[Ts,s("div",Ks,i(t.history.product_name.replaceAll("-"," ")),1)])):r("",!0),t.history.category_id!=99&&t.history.category_id!=1?(e(),a("div",Us,[Ds,s("div",Es,i(t.history.customer_no),1)])):r("",!0),s("div",Fs,[Qs,s("div",Ls,i(((b=(g=t.history)==null?void 0:g.desc)==null?void 0:b.replaceAll("/"," "))??"-"),1)])],64)),qs,s("div",zs,[Gs,s("div",Hs," Rp "+i(t.history.category_id==1||t.history.category_id>=8?y(t.history.amount):y(t.history.gross_amount)),1)]),t.history.manual_account?(e(),a("div",Js,[Ws,s("div",Xs,i(Number(t.history.gross_amount)-Number(t.history.amount)),1)])):r("",!0),s("div",Ys,[Zs,s("div",st," Rp "+i(t.history.category_id==1||t.history.category_id>=8?y(t.history.admin_fee):"0"),1)]),t.history.service_fee!=0?(e(),a("div",tt,[et,s("div",ot," Rp "+i(y(t.history.service_fee)),1)])):r("",!0),s("div",at,[it,s("div",nt,"Rp "+i(y(Number(t.history.gross_amount))),1)]),t.history.manual_account?(e(),a("div",lt,dt)):r("",!0)])])]),t.history.category_id===98&&t.history.status_id===2?(e(),a("div",mt,[n(I,{onClick:A},{default:m(()=>[u(" Cek Status ")]),_:1})])):r("",!0),t.history.manual_account?(e(),a("div",_t,[t.manual_account&&t.history.user_id==l.$page.props.user.id?(e(),E(H,{key:0,class:"border border-gray-600 dark:border-white",as:"outside",href:"https://api.whatsapp.com/send?phone=6285839036717&text=Halo%20admin%20Waykapay.%20Saya%20ingin%20mengirimkan%20bukti%20transfer",target:"_blank",replace:""},{default:m(()=>[u(" Kirim bukti tf ")]),_:1})):r("",!0),l.$page.props.user.role_id==1?(e(),a("div",ut,[pt,s("div",ht,[s("form",{onSubmit:F(M,["prevent"])},[s("div",ft,[s("div",yt,[n(J,{for:"amount",value:"Jumlah Validasi"}),s("div",vt,[bt,n(W,{id:"amount",modelValue:f.value,"onUpdate:modelValue":o[3]||(o[3]=d=>f.value=d),type:"tel",class:"mt-1 block w-full pl-10"},null,8,["modelValue"])]),n(X,{message:c(_).errors.valid_amount||O.value,class:"mt-2"},null,8,["message"])]),s("div",xt,[n(Y,{on:c(_).recentlySuccessful,class:"mr-3"},{default:m(()=>[u(" Berhasil disimpan. ")]),_:1},8,["on"]),n(I,{class:Q({"opacity-25":c(_).processing}),disabled:c(_).processing},{default:m(()=>[u(" Validasi ")]),_:1},8,["class","disabled"])])])],32)])])):r("",!0)])):r("",!0),n(Z,{show:v.value,onClose:R},{title:m(()=>[gt]),content:m(()=>[s("div",kt,[n(c(B),{ref_key:"otpInput",ref:x,value:S.value,"onUpdate:value":o[4]||(o[4]=d=>S.value=d),"input-classes":"otp-input",separator:"","num-inputs":6,"should-auto-focus":!0,"input-type":"letter-numeric",conditionalClass:["one","two","three","four","five","six"],onOnChange:K,onOnComplete:T},null,8,["value"]),C.value?(e(),a("p",wt,"Pin salah, silahkan coba lagi.")):r("",!0)])]),_:1},8,["show"])],64)}}};export{Ut as default};
