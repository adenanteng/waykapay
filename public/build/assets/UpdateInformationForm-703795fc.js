import{T as j,i as F,d as i,s as U,o as w,e as k,b as s,w as o,F as P,Q as R,a as e,t as d,g as f,u as l,n as T,f as z}from"./app-643b08a2.js";import{_ as D}from"./ActionMessage-4be013b8.js";import{_ as E}from"./FormSection-e275288d.js";import{_ as y}from"./InputError-cf28e385.js";import{_ as $}from"./InputLabel-212fd0e3.js";import{_ as K}from"./PrimaryButton-b2ba40c2.js";import{_ as q}from"./TextInput-23a3d5fe.js";import{_ as A}from"./ActionSection-f458139e.js";import{_ as Q}from"./TextAreaInput-67b00e04.js";import{e as N}from"./vue3-otp-input.esm-8adcdd37.js";import{b as G}from"./bcrypt-8b7b7333.js";import{a as H}from"./DialogModal-8408d21c.js";import"./SectionTitle-4d720bbf.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./_commonjs-dynamic-modules-302442b1.js";const J={class:"flex items-center px-2"},L={class:"flex-shrink-0"},W=["src","alt"],X={class:"ml-3 min-w-0 flex-1"},Y={class:"text-base font-medium text-gray-800 truncate capitalize"},Z={class:"text-sm font-medium text-gray-500 truncate"},ee={class:"col-span-6 sm:col-span-3"},se={class:"flex"},ae=e("span",{class:"flex items-center bg-white text-black border border-gray-300 border-r-0 rounded-3xl rounded-r-none shadow-sm mt-1 px-3"}," Rp ",-1),te={class:"mt-1 text-xs text-gray-600"},oe={class:"col-span-6 sm:col-span-4"},ne=e("div",{class:"w-full text-center"}," Masukkan PIN transaksi kamu ",-1),le={class:"grid justify-center"},re={key:0,class:"w-full text-center text-sm text-red-600 mt-2"},ye={__name:"UpdateInformationForm",props:{users:Object|String,response:Object|String,bank:Object,account_no:String},setup(C){const r=C,n=j({amount:null,bank:r.bank,account_no:r.account_no,desc:null}),{...p}=F(()=>R().props.user).value,_=i(null),g=()=>{n.amount=u.value.replaceAll(".",""),Number(n.amount)>=Number(p.wallet_balance)?(m.value=!1,_.value="Saldo kurang"):n.post(route("money-transfer.confirm"),{errorBag:"storeInformation",preserveScroll:!0,replace:!0,onSuccess:()=>{}})};function S(a){return(a/1).toFixed(0).replace(".","").toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}const u=i(null);U(u,a=>{u.value=a.toString().replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,".")});const m=i(!1),v=i(N|null),b=i(""),h=i(!1),V=()=>{p.pin?m.value=!0:g()},I=()=>{m.value=!1},B=a=>{let t=a;t=t.replace(/^\$2y(.+)$/i,"$2a$1"),G.compare(t,p.pin,function(c,M){var x;M?g():(h.value=!0,(x=v.value)==null||x.clearInput())})},O=a=>{};return(a,t)=>(w(),k(P,null,[s(A,null,{title:o(()=>[]),description:o(()=>[]),content:o(()=>[e("div",J,[e("div",L,[e("img",{class:"h-5 w-full",src:r.bank.logo,alt:r.bank.name},null,8,W)]),e("div",X,[e("div",Y,d(r.users.name),1),e("div",Z,d(r.account_no),1)])])]),_:1}),s(E,null,{title:o(()=>[f(" Mau Transfer berapa? ")]),description:o(()=>[]),form:o(()=>[e("div",ee,[s($,{for:"amount",value:"Nominal"}),e("div",se,[ae,s(q,{id:"amount",modelValue:u.value,"onUpdate:modelValue":t[0]||(t[0]=c=>u.value=c),type:"tel",class:"mt-1 block w-full rounded-l-none",min:"1",max:Number(a.$page.props.user.wallet_balance)<=2e6?a.$page.props.user.wallet_balance:2e6,required:"",autofocus:""},null,8,["modelValue","max"])]),s(y,{message:l(n).errors.amount||_.value,class:"mt-2"},null,8,["message"]),e("p",te," Nominal Rp 1.000 - Rp "+d(Number(a.$page.props.user.wallet_balance)<=2e6?S(a.$page.props.user.wallet_balance):"2.000.000"),1)]),e("div",oe,[s($,{for:"amount",value:"Keterangan"}),s(Q,{id:"desc",modelValue:l(n).desc,"onUpdate:modelValue":t[1]||(t[1]=c=>l(n).desc=c),type:"text",class:"mt-1 block w-full",rows:"1"},null,8,["modelValue"]),s(y,{message:l(n).errors.desc,class:"mt-2"},null,8,["message"])])]),actions:o(()=>[s(D,{on:l(n).recentlySuccessful,class:"mr-3"},{default:o(()=>[f(" Berhasil disimpan. ")]),_:1},8,["on"]),s(K,{class:T(["w-full justify-center",{"opacity-25":l(n).processing}]),disabled:l(n).processing,onClick:V},{default:o(()=>[f(" Konfirmasi ")]),_:1},8,["class","disabled"])]),_:1}),s(H,{show:m.value,onClose:I},{title:o(()=>[ne]),content:o(()=>[e("div",le,[s(l(N),{ref_key:"otpInput",ref:v,value:b.value,"onUpdate:value":t[2]||(t[2]=c=>b.value=c),"input-classes":"otp-input",separator:"","num-inputs":6,"should-auto-focus":!0,"input-type":"letter-numeric",conditionalClass:["one","two","three","four","five","six"],onOnChange:O,onOnComplete:B},null,8,["value"]),h.value?(w(),k("p",re,"Pin salah, silahkan coba lagi.")):z("",!0)])]),_:1},8,["show"])],64))}};export{ye as default};
