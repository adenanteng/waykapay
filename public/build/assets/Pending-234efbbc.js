import{T as R,d as u,i as O,s as T,o,e as i,a as s,b as l,F as p,t as a,g as h,w as _,u as c,f as d,c as K,l as U,n as D,Q as E,E as k,G as F}from"./app-af0266af.js";import{e as w}from"./popper.esm-a02ed07a.js";import{A as Q}from"./ApplicationLogoTitle-be0e93e3.js";import{e as N}from"./vue3-otp-input.esm-c1573c8f.js";import{b as L}from"./bcrypt-5d9ee347.js";import"./moment-6c316e0b.js";import{_ as q}from"./SecondaryButton-c535ab92.js";import{_ as z}from"./InputLabel-03e1d814.js";import{_ as G}from"./TextInput-01c85161.js";import{_ as H}from"./InputError-22f0e1c7.js";import{_ as J}from"./ActionMessage-dc05c9aa.js";import{_ as W}from"./PrimaryButton-25d5f35f.js";import{a as X}from"./DialogModal-a9d44a38.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./_commonjs-dynamic-modules-302442b1.js";const Y={class:"rounded-3xl bg-white bg-opacity-20 backdrop-blur-sm overflow-hidden shadow-lg border border-gray-300"},Z={class:"px-4 py-5 sm:px-6 flex flex-col justify-center items-center sm:items-start"},ss=s("h3",{class:"mt-1 text-lg font-bold leading-6 text-gray-900"},"Transaksi Pending",-1),ts={class:"border-t border-gray-600 border-dashed px-4 py-5 sm:px-6"},es={class:"grid grid-cols-1 gap-x-4 gap-y-2 sm:gap-y-8 sm:grid-cols-2 text-gray-900"},os={class:"sm:col-span-1 flex sm:block justify-between"},as=s("div",{class:"text-sm"},"Bank",-1),is={class:"text-sm font-semibold uppercase"},ns={class:"sm:col-span-1 flex sm:block justify-between"},ls=s("div",{class:"text-sm"},"No. Virtual Account",-1),cs={class:"text-sm font-semibold"},rs=s("i",{class:"fa-duotone fa-paste ml-2"},null,-1),ds=[rs],ms={class:"sm:col-span-1 flex sm:block justify-between"},_s=s("div",{class:"text-sm"},"Metode Pembayaran",-1),us={class:"text-sm font-semibold uppercase"},ps={class:"sm:col-span-2 flex flex-col items-center my-5 gap-3"},hs=s("div",{class:"text-sm"},[s("img",{src:"/img/vendor/QRIS.svg",class:"h-8 w-auto",alt:"QRIS"})],-1),fs={class:"text-sm"},ys={class:"sm:col-span-1 flex sm:block justify-between"},bs=s("div",{class:"text-sm"},"Metode Pembayaran",-1),vs={class:"text-sm font-semibold uppercase"},xs={class:"sm:col-span-1 flex sm:block justify-between"},gs=s("div",{class:"text-sm"},"No. Pembayaran",-1),ks={class:"text-sm font-semibold"},ws=s("i",{class:"fa-duotone fa-paste ml-2"},null,-1),js=[ws],$s={class:"sm:col-span-1 flex sm:block justify-between"},Cs=s("div",{class:"text-sm"},"Metode Pembayaran",-1),Ss={class:"text-sm font-semibold uppercase"},Ns=s("div",{class:"sm:col-span-1 flex sm:block justify-between"},[s("div",{class:"text-sm"},"Atas Nama"),s("div",{class:"text-sm font-semibold uppercase"},"Agus Suryaman")],-1),Bs={class:"sm:col-span-1 flex sm:block justify-between"},Vs=s("div",{class:"text-sm"},"No. Rekening",-1),Ps={class:"text-sm font-semibold"},As=s("i",{class:"fa-duotone fa-paste ml-2"},null,-1),Is=[As],Ms={key:0,class:"sm:col-span-1 flex sm:block justify-between"},Rs=s("div",{class:"text-sm"},"Produk",-1),Os={class:"text-sm font-semibold uppercase"},Ts={key:1,class:"sm:col-span-1 flex sm:block justify-between"},Ks=s("div",{class:"text-sm"},"No. Kustomer",-1),Us={class:"text-sm font-semibold"},Ds={class:"sm:col-span-2 flex sm:block justify-between gap-5"},Es=s("div",{class:"text-sm"},"Keterangan",-1),Fs={class:"text-sm font-semibold text-right sm:text-left"},Qs=s("span",{class:"my-2 border-t border-gray-600 border-dashed block sm:hidden"},null,-1),Ls={class:"sm:col-span-1 flex sm:block justify-between"},qs=s("div",{class:"text-sm"},"Nominal",-1),zs={class:"text-sm font-semibold"},Gs={key:5,class:"sm:col-span-1 flex sm:block justify-between"},Hs=s("div",{class:"text-sm"},"Kode Unik",-1),Js={class:"text-sm font-semibold"},Ws={class:"sm:col-span-1 flex sm:block justify-between"},Xs=s("div",{class:"text-sm"},"Biaya Admin",-1),Ys={class:"text-sm font-semibold"},Zs={key:6,class:"sm:col-span-1 flex sm:block justify-between"},st=s("div",{class:"text-sm"},"Biaya Layanan",-1),tt={class:"text-sm font-semibold"},et={class:"sm:col-span-1 flex sm:block justify-between"},ot=s("div",{class:"text-sm font-bold"},"Total",-1),at={class:"text-lg font-bold"},it={key:7,class:""},nt=s("span",{class:"my-2 border-t border-gray-600 border-dashed block sm:hidden"},null,-1),lt=s("p",{class:"text-xs text-gray-500"},"Untuk memudahkan transaksi harap transfer nominal beserta kode uniknya ya.",-1),ct=[nt,lt],rt={key:0,class:"mt-5 grid gap-5"},dt={key:1,class:"rounded-3xl bg-white bg-opacity-20 backdrop-blur-sm overflow-hidden shadow-lg border border-gray-300"},mt=s("div",{class:"px-4 py-5 sm:px-6 flex flex-col justify-center items-center sm:items-start"},[s("h3",{class:"mt-1 text-lg font-bold leading-6 text-gray-900"},"Validasi")],-1),_t={class:"border-t border-gray-600 border-dashed px-4 py-5 sm:px-6"},ut={class:"grid grid-cols-6"},pt={class:"col-span-6 sm:col-span-3"},ht={class:"flex"},ft=s("span",{class:"flex items-center bg-white text-black border border-gray-300 border-r-0 rounded-3xl rounded-r-none shadow-sm mt-1 px-3"}," Rp ",-1),yt={class:"col-span-6 mt-3 flex justify-between items-center"},bt=s("div",{class:"w-full text-center"}," Masukkan PIN transaksi kamu ",-1),vt={class:"grid justify-center"},xt={key:0,class:"w-full text-center text-sm text-red-600 mt-2"},Ot={__name:"Pending",props:{history:Object},setup(B){const t=B,m=R({valid:null,valid_amount:null}),j=()=>{m.valid=t.history.order_id,m.valid_amount=f.value.replaceAll(".",""),m.patch(route("transaction.update",t.history),{errorBag:"storeInformation",preserveScroll:!0,onSuccess:()=>{m.reset(),b.value=!1}})},V=()=>{S.pin?b.value=!0:j()},P=()=>{var n;b.value=!1,(n=x.value)==null||n.clearInput()},b=u(!1),x=u(N|null),$=u(""),C=u(!1),{...S}=O(()=>E().props.user).value,A=u(null),I=n=>{let e=n;e=e.replace(/^\$2y(.+)$/i,"$2a$1"),L.compare(e,S.pin,function(g,v){var r;v?j():(C.value=!0,(r=x.value)==null||r.clearInput())})},M=n=>{},f=u(t.history.gross_amount.toString().replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,"."));T(f,n=>{f.value=n.toString().replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,".")});function y(n){return(n/1).toFixed(0).replace(".","").toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}return(n,e)=>{var g,v;return o(),i(p,null,[s("div",Y,[s("div",Z,[l(Q,{class:"block sm:hidden"}),ss]),s("div",ts,[s("div",es,[t.history.virtual_account?(o(),i(p,{key:0},[s("div",os,[as,s("div",is,a(t.history.virtual_account.bank),1)]),s("div",ns,[ls,s("div",cs,[h(a(t.history.virtual_account.va_number)+" ",1),l(c(w),{class:"text-sm text-primary-700 font-normal lowercase",content:"Sukses Copy",arrow:"",placement:"right-end"},{default:_(()=>[s("button",{class:"",onClick:e[0]||(e[0]=r=>c(k)(t.history.virtual_account.va_number))},ds)]),_:1})])])],64)):t.history.wallet_account?(o(),i(p,{key:1},[s("div",ms,[_s,s("div",us,a(t.history.wallet_account.bank),1)]),s("div",ps,[hs,s("div",fs,[l(c(F),{value:t.history.wallet_account.qr_code,tag:"svg",options:{width:200,color:{dark:"#000",light:"#fff"}}},null,8,["value"])])])],64)):t.history.offline_account?(o(),i(p,{key:2},[s("div",ys,[bs,s("div",vs,a(t.history.offline_account.bank),1)]),s("div",xs,[gs,s("div",ks,[h(a(t.history.offline_account.payment_code)+" ",1),l(c(w),{class:"text-sm text-primary-700 font-normal lowercase",content:"Sukses Copy",arrow:"",placement:"right-end"},{default:_(()=>[s("button",{class:"",onClick:e[1]||(e[1]=r=>c(k)(t.history.offline_account.payment_code))},js)]),_:1})])])],64)):t.history.manual_account?(o(),i(p,{key:3},[s("div",$s,[Cs,s("div",Ss,a(t.history.manual_account.bank),1)]),Ns,s("div",Bs,[Vs,s("div",Ps,[h(a(t.history.manual_account.payment_code)+" ",1),l(c(w),{class:"text-sm text-primary-700 font-normal lowercase",content:"Sukses Copy",arrow:"",placement:"right-end"},{default:_(()=>[s("button",{class:"",onClick:e[2]||(e[2]=r=>c(k)(t.history.manual_account.payment_code))},Is)]),_:1})])])],64)):(o(),i(p,{key:4},[t.history.category_id!=99&&t.history.category_id!=1?(o(),i("div",Ms,[Rs,s("div",Os,a(t.history.product_name.replaceAll("-"," ")),1)])):d("",!0),t.history.category_id!=99&&t.history.category_id!=1?(o(),i("div",Ts,[Ks,s("div",Us,a(t.history.customer_no),1)])):d("",!0),s("div",Ds,[Es,s("div",Fs,a(((v=(g=t.history)==null?void 0:g.desc)==null?void 0:v.replaceAll("/"," "))??"-"),1)])],64)),Qs,s("div",Ls,[qs,s("div",zs," Rp "+a(t.history.category_id==1||t.history.category_id>=8?y(t.history.amount):y(t.history.gross_amount)),1)]),t.history.manual_account?(o(),i("div",Gs,[Hs,s("div",Js,a(Number(t.history.gross_amount)-Number(t.history.amount)),1)])):d("",!0),s("div",Ws,[Xs,s("div",Ys," Rp "+a(t.history.category_id==1||t.history.category_id>=8?y(t.history.admin_fee):"0"),1)]),t.history.service_fee!=0?(o(),i("div",Zs,[st,s("div",tt," Rp "+a(y(t.history.service_fee)),1)])):d("",!0),s("div",et,[ot,s("div",at,"Rp "+a(y(Number(t.history.gross_amount))),1)]),t.history.manual_account?(o(),i("div",it,ct)):d("",!0)])])]),t.history.manual_account?(o(),i("div",rt,[t.manual_account&&t.history.user_id==n.$page.props.user.id?(o(),K(q,{key:0,class:"border border-gray-600 dark:border-white",as:"outside",href:"https://api.whatsapp.com/send?phone=6285839036717&text=Halo%20admin%20Waykapay.%20Saya%20ingin%20mengirimkan%20bukti%20transfer",target:"_blank",replace:""},{default:_(()=>[h(" Kirim bukti tf ")]),_:1})):d("",!0),n.$page.props.user.role_id==1?(o(),i("div",dt,[mt,s("div",_t,[s("form",{onSubmit:U(V,["prevent"])},[s("div",ut,[s("div",pt,[l(z,{for:"amount",value:"Jumlah Validasi"}),s("div",ht,[ft,l(G,{id:"amount",modelValue:f.value,"onUpdate:modelValue":e[3]||(e[3]=r=>f.value=r),type:"tel",class:"mt-1 block w-full rounded-l-none"},null,8,["modelValue"])]),l(H,{message:c(m).errors.valid_amount||A.value,class:"mt-2"},null,8,["message"])]),s("div",yt,[l(J,{on:c(m).recentlySuccessful,class:"mr-3"},{default:_(()=>[h(" Berhasil disimpan. ")]),_:1},8,["on"]),l(W,{class:D({"opacity-25":c(m).processing}),disabled:c(m).processing},{default:_(()=>[h(" Validasi ")]),_:1},8,["class","disabled"])])])],32)])])):d("",!0)])):d("",!0),l(X,{show:b.value,onClose:P},{title:_(()=>[bt]),content:_(()=>[s("div",vt,[l(c(N),{ref_key:"otpInput",ref:x,value:$.value,"onUpdate:value":e[4]||(e[4]=r=>$.value=r),"input-classes":"otp-input",separator:"","num-inputs":6,"should-auto-focus":!0,"input-type":"letter-numeric",conditionalClass:["one","two","three","four","five","six"],onOnChange:M,onOnComplete:I},null,8,["value"]),C.value?(o(),i("p",xt,"Pin salah, silahkan coba lagi.")):d("",!0)])]),_:1},8,["show"])],64)}}};export{Ot as default};
