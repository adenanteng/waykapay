import{_ as j}from"./AppLayout-f8bffc1b.js";import{z as $,O as x,D as B,i as E,d as R,s as M,o as s,c as P,w as h,Q as S,a as e,g as o,t as a,e as n,F as i,h as g,b as m,n as p,f as V,u as f,m as D,H as U}from"./app-d3bbb55f.js";import{_ as C}from"./MobileMenu-8095b85f.js";import{h as H}from"./moment-fbc5633a.js";import{V as N}from"./vue3-lottie.es-c31c51fc.js";import{_ as z}from"./Badge-4b36f33b.js";import{P as F,E as I}from"./echo-142324f7.js";import"./OnlineStatus-2fe38a6c.js";import"./index-2961de00.js";import"./DarkmodeToggle-54a49a15.js";import"./helper-04030b53.js";import"./use-controllable-9a271712.js";import"./use-resolve-button-type-10479c02.js";import"./vue3-otp-input.esm-8bcea26b.js";import"./DialogModal-b5f7ade2.js";import"./PrimaryButton-998cb131.js";import"./InputError-21fc0369.js";import"./BackgroundParticle-de90c8eb.js";import"./use-outside-click-dd25207f.js";import"./focus-management-3dd64973.js";const L={class:"col-span-1 divide-y divide-gray-300 dark:divide-gray-600 rounded-3xl bg-white bg-opacity-20 backdrop-blur-sm shadow-lg border border-gray-300"},O={class:"flex w-full items-center justify-between space-x-6 p-6"},A={class:"flex-1 truncate"},T=e("p",{class:"mt-1 truncate text-sm text-gray-500"},"Bulan ini",-1),K={class:"truncate text-sm font-medium text-gray-900"},Q=e("span",{class:"truncate text-xs text-gray-500"},"transaksi sukses",-1),Y={class:"-mt-px flex divide-x divide-gray-300 dark:divide-gray-600"},q={class:"flex w-0 flex-1"},G={class:"relative -mr-px inline-flex w-0 flex-1 items-center justify-center rounded-bl-lg border border-transparent py-4"},J=e("i",{class:"fa-duotone fa-down text-primary-400"},null,-1),W={class:"ml-3"},X=e("div",{class:"text-xs text-gray-500"},"Uang Masuk",-1),Z={class:"text-sm font-medium text-gray-700"},ee={class:"-ml-px flex w-0 flex-1"},te={class:"relative inline-flex w-0 flex-1 items-center justify-center rounded-br-lg border border-transparent py-4"},se=e("i",{class:"fa-duotone fa-up text-amber-400"},null,-1),ae={class:"ml-3"},ne=e("div",{class:"text-xs text-gray-500"},"Uang Keluar",-1),oe={class:"text-sm font-medium text-gray-700"},re={key:0,class:"animate-pulse rounded-3xl bg-white bg-opacity-20 backdrop-blur-sm shadow-lg border border-gray-300 divide-y divide-gray-300"},ie={class:"px-4 py-4 sm:px-6"},le=e("div",{class:"flex items-center justify-between"},[e("p",{class:"bg-gray-300 text-gray-300 w-full rounded-3xl"},"a"),e("div",{class:"ml-2 flex-shrink-0 flex"},[e("p",{class:"px-2 bg-gray-300 text-gray-300 rounded-full w-20"},"b")])],-1),ce=e("div",{class:"sm:flex sm:justify-between"},[e("p",{class:"flex items-center bg-gray-300 text-gray-300 w-1/2 rounded-3xl"},"c")],-1),de=[le,ce],ue={key:1,class:""},_e={class:"text-sm text-gray-500 font-medium ml-5 mt-5 mb-1 flex items-center"},me={class:"rounded-3xl bg-white bg-opacity-20 backdrop-blur-sm overflow-hidden shadow-lg border border-gray-300"},pe={role:"list",class:"divide-y divide-gray-300 dark:divide-gray-600"},fe={class:"px-4 py-4 sm:px-6"},xe={class:"flex items-center justify-between"},ge={class:"ml-2 flex-shrink-0 flex"},ye={class:"flex justify-between"},he={class:"flex"},ve={class:"mt-10"},be={class:"text-sm text-center text-gray-600 mb-5"},we=e("i",{class:"fa-regular fa-angle-down animate-bounce mt-1"},null,-1),ke={key:1,class:"px-4 py-4 sm:px-6 text-center text-gray-900 text-sm"},Te={__name:"Index",props:{history:void 0,in_count:void 0,out_count:void 0,all_process:void 0,filters:{type:Object,default:()=>({})}},setup(v){const c=v;$(()=>{x.reload({only:["history","history_count","in_count","out_count","all_process","filters"]})}),B(()=>{window.Echo.leave("transaction-channel")});function b(r){return H(r).format("DD MMM Y HH:mm")}function u(r){return(r/1).toFixed(0).replace(".","").toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}const{...w}=E(()=>S().props.user).value;typeof window<"u"&&(window.Pusher=F,window.Echo=new I({broadcaster:"pusher",key:"e4c42e8e3951c6ee37f6",cluster:"ap1",forceTLS:!0}),window.Echo.channel("transaction-channel").listen(".transaction-event",function(l){l.action==="reload"&&l.user===w.slug?(x.reload({only:["history","in_count","out_count","all_process"]}),console.log(l.action,l.user)):console.log(l)}));let d=R(c.filters.filterPaginate??20);return M([d],([r])=>{x.get(route("history.index"),{filter_paginate:r},{preserveState:!0,preserveScroll:!0,replace:!0,only:["history","history_count","in_count","out_count","all_process","filters"]})}),(r,l)=>(s(),P(j,{title:"Riwayat",name:"Riwayat",desc:"Riwayat transaksi kamu"},{default:h(()=>[e("div",L,[e("div",O,[e("div",A,[T,e("h3",K,[o(a(c.all_process)+" ",1),Q])])]),e("div",null,[e("div",Y,[e("div",q,[e("div",G,[J,e("div",W,[X,e("div",Z,"Rp "+a(u(c.in_count??0)),1)])])]),e("div",ee,[e("div",te,[se,e("div",ae,[ne,e("div",oe,"Rp "+a(u(c.out_count??0)),1)])])])])])]),c.history===void 0?(s(),n("div",re,[(s(),n(i,null,g(6,_=>e("div",ie,de)),64))])):(s(),n("div",ue,[(s(!0),n(i,null,g(c.history,(_,k)=>(s(),n(i,null,[e("h3",_e,[o(a(k)+" ",1),m(z,{name:_.length+" transaksi",class:"ml-3 text-xs text-primary-600 bg-primary-100"},null,8,["name"])]),e("div",me,[e("ul",pe,[(s(!0),n(i,null,g(_,t=>(s(),n("li",{key:t.id},[m(f(D),{"preserve-scroll":"",href:r.route("history.show",t.order_id),class:"block hover:bg-primary-50"},{default:h(()=>{var y;return[e("div",fe,[e("div",xe,[e("p",{class:p(["text-sm font-medium truncate capitalize",t.status_id==1||t.status_id==2?"text-gray-900":"text-gray-500"])},[o(a(t.product_name.replaceAll("-"," "))+" ",1),t.virtual_account?(s(),n(i,{key:0},[o(a(t.virtual_account.bank),1)],64)):t.wallet_account?(s(),n(i,{key:1},[o(a(t.wallet_account.bank),1)],64)):t.offline_account?(s(),n(i,{key:2},[o(a(t.offline_account.bank),1)],64)):t.manual_account?(s(),n(i,{key:3},[o(a(t.manual_account.bank),1)],64)):t.money_transfer?(s(),n(i,{key:4},[t.user_id==r.$page.props.user.id?(s(),n(i,{key:0},[o(" ke "+a((y=t.money_transfer)==null?void 0:y.to_name),1)],64)):(s(),n(i,{key:1},[o(" dari "+a(t.user.name),1)],64))],64)):V("",!0)],2),e("div",ge,[e("p",{class:p(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",t.color])},a(t.status),3)])]),e("div",ye,[e("div",he,[e("p",{class:p(["flex items-center text-xs",t.status_id==1||t.status_id==2?"text-gray-900":"text-gray-500"])},a(t.category_id==1||t.user_id!=r.$page.props.user.id?"+":"-")+" Rp "+a(t.category_id==1?u(t.amount):u(t.gross_amount)),3)]),e("div",{class:p(["flex items-center text-xs",t.status_id==1||t.status_id==2?"text-gray-900":"text-gray-500"])},a(b(t.created_at)),3)])])]}),_:2},1032,["href"])]))),128))])])],64))),256)),e("div",ve,[e("div",be,[o(" Menampilkan "),e("strong",null,a(f(d)),1),o(" dari "),e("strong",null,a(r.$page.props.history_count),1),o(" hasil ")]),f(d)<=r.$page.props.history_count?(s(),n("button",{key:0,class:"w-full grid text-gray-900 font-medium",onClick:l[0]||(l[0]=_=>U(d)?d.value+=20:d+=20)},[o(" Selanjutnya "),we])):(s(),n("div",ke,[m(f(N),{"animation-link":"https://lottie.host/847b8a44-3ca7-458b-a9b8-32c1c5d63308/ABskoUU2IH.json",height:200,width:200}),o(" Eits, udah mentok hehe ")]))])])),m(C)]),_:1}))}};export{Te as default};
