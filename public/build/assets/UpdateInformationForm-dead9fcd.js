import{T as M,i as F,d as u,s as U,o as k,e as w,b as s,w as n,F as D,Q as P,a as e,t as _,g as b,u as i,n as R,f as T}from"./app-757d8623.js";import{_ as z}from"./ActionMessage-92c73564.js";import{_ as A}from"./FormSection-d8e9372f.js";import{_ as $}from"./InputError-1cdfdf33.js";import{_ as S}from"./InputLabel-02fbcd51.js";import{_ as E}from"./PrimaryButton-3838f79b.js";import{_ as K}from"./TextInput-100ebe77.js";import{_ as q}from"./ActionSection-8ee3d4ee.js";import{_ as Q}from"./TextAreaInput-aa7a4f54.js";import{e as N}from"./vue3-otp-input.esm-59fae57b.js";import{b as G}from"./bcrypt-208ae96d.js";import{a as H}from"./DialogModal-15f88b7b.js";import"./SectionTitle-e2948611.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./_commonjs-dynamic-modules-302442b1.js";const J={class:"flex items-center px-2"},L={class:"flex-shrink-0"},W=["src","alt"],X={class:"ml-3 min-w-0 flex-1"},Y={class:"text-base font-medium text-gray-800 truncate capitalize"},Z={class:"text-sm font-medium text-gray-500 truncate"},ee={class:"col-span-6 sm:col-span-3"},ae={class:"flex"},se=e("span",{class:"flex items-center bg-white text-black border border-gray-300 border-r-0 rounded-3xl rounded-r-none shadow-sm mt-1 px-3"}," Rp ",-1),te={class:"mt-1 text-xs text-gray-600"},oe={class:"col-span-6 sm:col-span-4"},ne=e("div",{class:"w-full text-center"}," Masukkan PIN transaksi kamu ",-1),le={class:"grid justify-center"},re={key:0,class:"w-full text-center text-sm text-red-600 mt-2"},we={__name:"UpdateInformationForm",props:{users:Object|String,beneficiary:Object|String,token:String,response:Object|String,bank:Object,account_no:String},setup(C){const l=C,a=M({amount:null,bank:l.bank,account_no:l.account_no,desc:null,beneficiary:l.beneficiary??null,token:l.token??null}),{...f}=F(()=>P().props.user).value,g=u(null),v=()=>{Number(a.amount)>=Number(f.wallet_balance)?(p.value=!1,g.value="Saldo kurang"):l.beneficiary?(a.amount=c.value,a.post(route("money-transfer.confirmAyo"),{errorBag:"storeInformation",preserveScroll:!0,replace:!0,onSuccess:()=>{}})):(a.amount=c.value.replaceAll(".",""),a.post(route("money-transfer.confirm"),{errorBag:"storeInformation",preserveScroll:!0,replace:!0,onSuccess:()=>{}}))};function V(t){return(t/1).toFixed(0).replace(".","").toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}const c=u(null);U(c,t=>{c.value=t.toString().replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,".")});const p=u(!1),h=u(N|null),y=u(""),x=u(!1),I=()=>{f.pin?p.value=!0:v()},B=()=>{p.value=!1},O=t=>{let o=t;o=o.replace(/^\$2y(.+)$/i,"$2a$1"),G.compare(o,f.pin,function(r,d){var m;d?v():(x.value=!0,(m=h.value)==null||m.clearInput())})},j=t=>{};return(t,o)=>(k(),w(D,null,[s(q,null,{title:n(()=>[]),description:n(()=>[]),content:n(()=>{var r,d,m;return[e("div",J,[e("div",L,[e("img",{class:"h-5 w-full",src:l.bank.logo,alt:l.bank.name},null,8,W)]),e("div",X,[e("div",Y,_(((r=l.users)==null?void 0:r.name)??((m=(d=l.beneficiary)==null?void 0:d.beneficiaryDetails)==null?void 0:m.beneficiaryName)),1),e("div",Z,_(l.account_no),1)])])]}),_:1}),s(A,null,{title:n(()=>[b(" Mau Transfer berapa? ")]),description:n(()=>[]),form:n(()=>[e("div",ee,[s(S,{for:"amount",value:"Nominal"}),e("div",ae,[se,s(K,{id:"amount",modelValue:c.value,"onUpdate:modelValue":o[0]||(o[0]=r=>c.value=r),type:"tel",class:"mt-1 block w-full rounded-l-none",min:"1",max:Number(t.$page.props.user.wallet_balance)<=2e6?t.$page.props.user.wallet_balance:2e6,required:"",autofocus:""},null,8,["modelValue","max"])]),s($,{message:i(a).errors.amount||g.value,class:"mt-2"},null,8,["message"]),e("p",te," Nominal Rp 1.000 - Rp "+_(Number(t.$page.props.user.wallet_balance)<=2e6?V(t.$page.props.user.wallet_balance):"2.000.000"),1)]),e("div",oe,[s(S,{for:"amount",value:"Keterangan"}),s(Q,{id:"desc",modelValue:i(a).desc,"onUpdate:modelValue":o[1]||(o[1]=r=>i(a).desc=r),type:"text",class:"mt-1 block w-full",rows:"1"},null,8,["modelValue"]),s($,{message:i(a).errors.desc,class:"mt-2"},null,8,["message"])])]),actions:n(()=>[s(z,{on:i(a).recentlySuccessful,class:"mr-3"},{default:n(()=>[b(" Berhasil disimpan. ")]),_:1},8,["on"]),s(E,{class:R(["w-full justify-center",{"opacity-25":i(a).processing}]),disabled:i(a).processing,onClick:I},{default:n(()=>[b(" Konfirmasi ")]),_:1},8,["class","disabled"])]),_:1}),s(H,{show:p.value,onClose:B},{title:n(()=>[ne]),content:n(()=>[e("div",le,[s(i(N),{ref_key:"otpInput",ref:h,value:y.value,"onUpdate:value":o[2]||(o[2]=r=>y.value=r),"input-classes":"otp-input",separator:"","num-inputs":6,"should-auto-focus":!0,"input-type":"letter-numeric",conditionalClass:["one","two","three","four","five","six"],onOnChange:j,onOnComplete:O},null,8,["value"]),x.value?(k(),w("p",re,"Pin salah, silahkan coba lagi.")):T("",!0)])]),_:1},8,["show"])],64))}};export{we as default};
